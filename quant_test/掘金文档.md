# 基础函数
## init - 初始化策略

初始化策略, 策略启动时自动执行。可以在这里初始化策略配置参数。

**函数原型：**

```
init(context)
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|context|[context](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#context-%E4%B8%8A%E4%B8%8B%E6%96%87%E5%AF%B9%E8%B1%A1)|上下文，全局变量可存储在这里|

**示例：**

```
def init(context):
    # 订阅bar
    subscribe(symbols='SHSE.600000,SHSE.600004', frequency='30s', count=5)
	# 增加对象属性，如:设置一个股票资金占用百分比
	context.percentage_stock = 0.8
```

**注意：**

**1.** 回测模式下init函数里不支持交易操作，仿真模式和实盘模式支持。

**2.** init只会在策略启动时运行一次，如果不是每天重启策略，每天需要查询更新数据，可以通过设置定时任务执行。

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0.html#schedule-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE)schedule - 定时任务配置

在指定时间自动执行策略算法, 通常用于选股类型策略

**函数原型：**

```
schedule(schedule_func, date_rule, time_rule)
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|schedule_func|function|策略定时执行算法|
|date_rule|str|n + 时间单位， 可选'd/w/m' 表示 n 天/n 周/n 月|
|time_rule|str|执行算法的具体时间 (%H:%M:%S 格式)|

**返回值：**

`None`

**示例：**

```
def init(context):
    #每天的19:06:20执行策略algo_1
    schedule(schedule_func=algo_1, date_rule='1d', time_rule='19:06:20')
	#每月的第一个交易日的09:40:00执行策略algo_2
	schedule(schedule_func=algo_2, date_rule='1m', time_rule='9:40:00')

def algo_1(context):
    print(context.symbols)

def algo_2(context):
    order_volume(symbol='SHSE.600000', volume=200, side=OrderSide_Buy, order_type=OrderType_Market, position_effect=PositionEffect_Open)


```

**注意：**

**1.** time_rule 的时,分,秒均不可以只输入个位数，例:`'9:40:0'`或`'14:5:0'`

**2.** 目前暂时支持`1d`、`1w`、`1m`，其中`1w`、`1m`仅用于回测

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0.html#run-%E8%BF%90%E8%A1%8C%E7%AD%96%E7%95%A5)run - 运行策略

**函数原型：**

```
run(strategy_id='', filename='', mode=MODE_UNKNOWN, token='', backtest_start_time='',
    backtest_end_time='', backtest_initial_cash=1000000,
    backtest_transaction_ratio=1, backtest_commission_ratio=0,
    backtest_slippage_ratio=0, backtest_adjust=ADJUST_NONE, backtest_check_cache=1,
    serv_addr='', backtest_match_mode=0)
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|strategy_id|str|策略 id|
|filename|str|策略文件名称|
|mode|int|策略模式 MODE_LIVE(实时)=1 MODE_BACKTEST(回测) =2|
|token|str|用户标识|
|backtest_start_time|str|回测开始时间 (%Y-%m-%d %H:%M:%S 格式)|
|backtest_end_time|str|回测结束时间 (%Y-%m-%d %H:%M:%S 格式)|
|backtest_initial_cash|double|回测初始资金, 默认 1000000|
|backtest_transaction_ratio|double|回测成交比例, 默认 1.0, 即下单 100%成交|
|backtest_commission_ratio|double|回测佣金比例, 默认 0|
|backtest_slippage_ratio|double|回测滑点比例, 默认 0|
|backtest_adjust|int|回测复权方式(默认不复权) ADJUST_NONE(不复权)=0 ADJUST_PREV(前复权)=1 ADJUST_POST(后复权)=2|
|backtest_check_cache|int|回测是否使用缓存：1 - 使用， 0 - 不使用；默认使用|
|serv_addr|str|终端服务地址, 默认本地地址, 可不填，若需指定应输入 ip+端口号，如"127.0.0.1:7001"|
|backtest_match_mode|int|回测市价撮合模式： 1-实时撮合：在当前 bar 的收盘价/当前 tick 的 price 撮合，0-延时撮合：在下个 bar 的开盘价/下个 tick 的 price 撮合，默认是模式 0|

**返回值：**

`None`

**示例：**

```
run(strategy_id='strategy_1', filename='main.py', mode=MODE_BACKTEST, token='token_id',
    backtest_start_time='2016-06-17 13:00:00', backtest_end_time='2017-08-21 15:00:00')
```

**注意：**

**1.** run 函数中，`mode=1`也可改为`mode=MODE_LIVE`，两者等价，`backtest_adjust`同理

**2.** 在前复权和后复权回测模式下，是不会处理分红、送股、拆分事件的，因为除权除息产生的变动已经通过复权因子调整反映在前复权/后复权股价中，无需重复处理。不复权会自动处理分红送转。

**3.** filename 指运行的 py 文件名字，如该策略文件名为 Strategy.py,则此处应填"Strategy.py"

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0.html#stop-%E5%81%9C%E6%AD%A2%E7%AD%96%E7%95%A5)stop - 停止策略

停止策略，退出策略进程

**函数原型：**

```
stop()
```

**返回值：**

`None`

**示例：**

```
#若订阅过的代码集合为空，停止策略
if not context.symbols:
   stop()
```

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0.html#timer-%E8%AE%BE%E7%BD%AE%E5%AE%9A%E6%97%B6%E5%99%A8)timer - 设置定时器

设定定时器的间隔秒数，每过设定好的秒数调用一次计时器 timer_func()，直到 timer_stop()结束定时器为止。 （仿真、实盘场景适用，回测模式下不生效）

**函数原型：**

```
timer(timer_func, period, start_delay)
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|timer_func|function|在 timer 设置的时间到达时触发的事件函数|
|period|int|定时事件间隔毫秒数，设定每隔多少毫秒触发一次定时器，范围在 [1,43200000]|
|start_delay|int|等待秒数(毫秒)，设定多少毫秒后启动定时器，范围在[0,43200000]|

**返回值：** **dict**

|字段|类型|说明|
|---|---|---|
|timer_status|int|定时器设置是否成功，成功=0，失败=非 0 错误码（timer_id 无效）。|
|timer_id|int|设定好的定时器 id|

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0.html#timer-stop-%E5%81%9C%E6%AD%A2%E5%AE%9A%E6%97%B6%E5%99%A8)`timer_stop` - 停止定时器

停止已设置的定时器

**函数原型：**

```
timer_stop(timer_id)
```

**参数：**

|字段|类型|说明|
|---|---|---|
|timer_id|int|要停止的定时器 id|

**返回值：**

|字段|类型|说明|
|---|---|---|
|is_stop|bool|是否成功停止，True or False|

**示例：**

```
def init(context):
    # 每隔1分钟执行ontime_1, 即时启动
    context.timerid_1 = timer(timer_func=ontimer_1, period=60000, start_delay=0)
    context.counter_1 = 0

    # 每隔半小时执行ontime_2, 5分钟之后启动
    context.timerid_2 = timer(timer_func=ontimer_2, period=300000, start_delay=0)
    print('启动定时器2：', context.now)
    context.counter_2 = 0


def ontimer_1(context):
    # 定时器执行次数计数
    context.counter_1 += 1
    # 定时器执行逻辑
    print('定时器1：', context.now)


def ontimer_2(context):
    # 定时器执行次数计数
    context.counter_2 += 1
    # 定时器执行逻辑（如查询账户资金）
    cash = context.account().cash

    print('定时器2：', context.now)

    # 按执行次数条件停止定时器
    if context.counter_1 >= 5:
        ret1 = timer_stop(context.timerid_1['timer_id'])
        if ret1:
            print("结束1分钟定时器")

    if context.counter_2 >= 10:
        ret2 = timer_stop(context.timerid_2['timer_id'])
```

**注意：**

**1.** 仿真、实盘场景适用，回测模式下不生效

**2.** period 从前一次事件函数开始执行时点起算，若下一次事件函数需要执行时，前一次事件函数没运行完毕，等待上一个事件执行完毕再执行下一个事件。

# 数据订阅

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E6%95%B0%E6%8D%AE%E8%AE%A2%E9%98%85.html#subscribe-%E8%A1%8C%E6%83%85%E8%AE%A2%E9%98%85)subscribe - 行情订阅

订阅行情, 可以指定 symbol, 数据滑窗大小, 以及是否需要等待全部代码的数据到齐再触发事件。

**函数原型：**

```
subscribe(symbols, frequency='1d', count=1, unsubscribe_previous=False)
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|symbols|str or list|订阅[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86), 注意大小写，支持字串格式，如有多个代码, 中间用 `,` (英文逗号) 隔开, 也支持 `['symbol1', 'symbol2']` 这种列表格式|
|frequency|str|频率, 支持 'tick', '60s', '300s', '900s' 等, 默认'1d', 详情见[股票行情数据](https://www.myquant.cn/docs2/docs/index.html#%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)和[期货行情数据](https://www.myquant.cn/docs2/docs/%E6%9C%9F%E8%B4%A7.html#%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE), [实时行情支持的频率](https://www.myquant.cn/docs2/faq/%E6%95%B0%E6%8D%AE%E9%97%AE%E9%A2%98.html#%E8%AE%A2%E9%98%85%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E9%A2%91%E7%8E%87)|
|count|int|context.data返回的订阅数据滑窗大小, 默认`1` ,详情见[数据滑窗](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#context-data-%E6%9F%A5%E8%AF%A2%E8%AE%A2%E9%98%85%E6%95%B0%E6%8D%AE)|
|wait_group|bool|是否等待同一频率的bar同时到齐（只支持bar频率），默认`False`不取消, 输入`True`则同时等待同频率所有bar到齐再一次性返回|
|wait_group_timeout|str|等待超时时间，只有wait_group=True时生效，默认'10s'|
|unsubscribe_previous|bool|是否取消过去订阅的 symbols, 默认`False`不取消, 输入`True`则取消所有原来的订阅。|
|fields|str|context.data返回的对象字段, 如有多个字段, 中间用, 隔开, 默认所有, 具体字段见:[tick 对象](https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#tick-tick-%E5%AF%B9%E8%B1%A1) 和 [bar 对象](https://www.myquant.cn/docs2/sdk/python/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bar-bar-%E5%AF%B9%E8%B1%A1) ，在 subscribe 函数中指定的字段越少，context.data查询速度越快|
|format|str|context.data返回的数据格式，默认"df", "df": 数据框格式，返回dataframe（默认）,"row": 原始行式组织格式，返回list[dict]（当用户对性能有要求时, 推荐使用此格式）, "col": 列式组织格式，返回dict 。|

**返回值：**

`None`

**示例：**

```
def init(context):
    # 同时订阅600519的tick数据和分钟数据
    subscribe(symbols='SHSE.600519', frequency='tick', count=2)
    subscribe(symbols='SHSE.600519', frequency='60s', count=2)


def on_tick(context,tick):
    print('收到tick行情---', tick)


def on_bar(context,bars):
    print('收到bar行情---', bars)
    data = context.data(symbol='SHSE.600519', frequency='60s', count=2)
    print('bar数据滑窗---', data)
```

**注意：**

**1.** subscribe 支持多次调用，支持同一标的不同频率订阅。订阅后的数据储存在本地，需要通过 context.data 接口调用或是直接在 on_tick 或 on_bar 中获取。

**2.** 在实时模式下，最新返回的数据是**不复权**的。

**3.** 订阅函数subscribe里面指定字段越少，查询速度越快，目前效率是row > col > df。

**4.** 当subscribe的format指定col时，tick的quotes字段会被拆分，只返回买卖一档的量和价，即只有bid_p，bid_v, ask_p和ask_v。

**5.** 在回测模式下，subscribe使用wait_group=True时，等待的标的需要下个时间到期。例如订阅60s的频率A和B标的，当天第一条bar数据是在09:32:00推送eob为09:31:00的A和B的bar，因为需要走到09:32:00才能确认09:31:00的全部bar是否到齐。在实时模式下，会根据实时到齐时间推送。

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E6%95%B0%E6%8D%AE%E8%AE%A2%E9%98%85.html#unsubscribe-%E5%8F%96%E6%B6%88%E8%AE%A2%E9%98%85)unsubscribe - 取消订阅

取消行情订阅, 默认取消所有已订阅行情

**函数原型：**

```
unsubscribe(symbols='*', frequency='60s')
```

**参数：**

|参数名|类型|说明|
|---|---|---|
|symbols|str or list|订阅[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86), 支持字串格式，如有多个代码, 中间用 `,` (英文逗号) 隔开, 也支持 `['symbol1', 'symbol2']` 这种列表格式|
|frequency|str|频率, 支持 'tick', '60s', '300s', '900s' 等, 默认'1d', 详情见[股票行情数据](https://www.myquant.cn/docs2/docs/index.html#%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)和[期货行情数据](https://www.myquant.cn/docs2/docs/%E6%9C%9F%E8%B4%A7.html#%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE), [实时行情支持的频率](https://www.myquant.cn/docs2/faq/%E6%95%B0%E6%8D%AE%E9%97%AE%E9%A2%98.html#%E8%AE%A2%E9%98%85%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E9%A2%91%E7%8E%87)|

**返回值：**

`None`

**示例：**

```
unsubscribe(symbols='SHSE.600000,SHSE.600004', frequency='60s')
```

**注意：** 如示例所示代码，取消`SHSE.600000,SHSE.600004`两只代码`60s`行情的订阅，若`SHSE.600000`同时还订阅了`"300s"`频度的行情，该代码不会取消该标的此频度的订阅

# 通用数据函数（免费）

python 通用数据 API 包含在 gm3.0.148 版本及以上版本，不需要引入新库

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-symbol-infos-%E6%9F%A5%E8%AF%A2%E6%A0%87%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF)`get_symbol_infos` - 查询标的基本信息

获取指定(范围)交易标的基本信息，与时间无关.

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_symbol_infos(sec_type1, sec_type2=None, exchanges=None, symbols=None, df=False)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|sec_type1|int|证券品种大类|Y|无|指定一种证券大类，只能输入一个. 证券大类 sec_type1 清单 1010: 股票， 1020: 基金， 1030: 债券 ， 1040: 期货， 1050: 期权， 1060: 指数，1070：板块.|
|sec_type2|int|证券品种细类|N|None|指定一种证券细类，只能输入一个. 默认`None`表示不区分细类，即证券大类下所有细类. 证券细类见 sec_type2 清单 - 股票 101001:A 股，101002:B 股，101003:存托凭证 - 基金 102001:ETF，102002:LOF，102005:FOF - 债券 103001:可转债，103008:回购 - 期货 104001:股指期货，104003:商品期货，104006:国债期货 - 期权 105001:股票期权，105002:指数期权，105003:商品期权 - 指数 106001:股票指数，106002:基金指数，106003:债券指数，106004:期货指数 - 板块：107001:概念板块|
|exchanges|str or list|交易所代码|N|None|输入交易所代码，可输入多个. 采用 str 格式时，多个交易所代码必须用英文逗号分割，如：`'SHSE,SZSE'` 采用 list 格式时，多个交易所代码示例：`['SHSE', 'SZSE']` 默认`None`表示所有交易所. 交易所代码清单 SHSE:上海证券交易所，SZSE:深圳证券交易所 ， CFFEX:中金所，SHFE:上期所，DCE:大商所， CZCE:郑商所， INE:上海国际能源交易中心 ，GFEX:广期所|
|symbols|str or list|标的代码|N|None|输入标的代码，可输入多个. 采用 str 格式时，多个标的代码必须用英文逗号分割，如：`'SHSE.600008,SZSE.000002'` 采用 list 格式时，多个标的代码示例：`['SHSE.600008', 'SZSE.000002']` 默认`None`表示所有标的.|
|df|bool|返回格式|N|False|是否返回 dataframe 格式，默认`False`返回字典格式，返回 `list[dict]`， 列表每项的 dict 的 key 值为 fields 字段.|

**返回值：**

|字段名|类型|中文名称|说明|股票字段|基金字段|债券字段|期货字段|期权字段|指数字段|
|---|---|---|---|---|---|---|---|---|---|
|symbol|str|标的代码|exchange.sec_id|√|√|√|√|√|√|
|sec_type1|int|证券品种大类|1010: 股票，1020: 基金， 1030: 债券，1040: 期货， 1050: 期权，1060: 指数，1070：板块|√|√|√|√|√|√|
|sec_type2|int|证券品种细类|- 股票 101001:A 股，101002:B 股，101003:存托凭证 - 基金 102001:ETF，102002:LOF，102005:FOF - 债券 103001:可转债，103003:国债，103006:企业债，103008:回购 - 期货 104001:股指期货，104003:商品期货，104006:国债期货 - 期权 105001:股票期权，105002:指数期权，105003:商品期权 - 指数 106001:股票指数，106002:基金指数，106003:债券指数，106004:期货指数 - 板块：107001:概念板块|√|√|√|√|√|√|
|board|int|板块|A 股 10100101:主板 A 股 10100102:创业板 10100103:科创版 10100104:北交所股票 ETF 10200101:股票 ETF 10200102:债券 ETF 10200103:商品 ETF 10200104:跨境 ETF 10200105:货币 ETF 可转债 10300101:普通可转债 10300102:可交换债券 10300103:可分离式债券 10300104:定向可转债|√|√|√|无|无|无|
|exchange|str|交易所代码|SHSE:上海证券交易所， SZSE:深圳证券交易所， CFFEX:中金所， SHFE:上期所， DCE:大商所， CZCE:郑商所， INE:上海国际能源交易中心 ，GFEX:广期所|√|√|√|√|√|√|
|sec_id|str|交易所标的代码|股票,基金,债券,指数的证券代码; 期货,期权的合约代码|√|√|√|√|√|√|
|sec_name|str|交易所标的名称|股票,基金,债券,指数的证券名称; 期货,期权的合约名称|√|√|√|√|√|√|
|sec_abbr|str|交易所标的简称|拼音或英文简称|√|√|√|√|√|√|
|price_tick|float|最小变动单位|交易标的价格最小变动单位|√|√|√|√|√|√|
|trade_n|int|交易制度|0 表示 T+0，1 表示 T+1，2 表示 T+2|√|√|√|√|√|√|
|listed_date|datetime.datetime|上市日期|证券/指数的上市日、衍生品合约的挂牌日|√|√|√|√|√|√|
|delisted_date|datetime.datetime|退市日期|股票/基金的退市日， 期货/期权的到期日(最后交易日)， 可转债的赎回登记日|√|√|√|√|√|√|
|underlying_symbol|str|标的资产|期货/期权的合约标的物 symbol，可转债的正股标的 symbol|无|无|√|√|√|无|
|option_type|str|行权方式|期权行权方式，仅期权适用，E:欧式，A:美式|无|无|无|无|√|无|
|option_margin_ratio1|float|期权保证金计算系数 1|计算期权单位保证金的第 1 个系数，仅期权适用|无|无|无|无|√|无|
|option_margin_ratio2|float|期权保证金计算系数 2|计算期权单位保证金的第 2 个系数，仅期权适用|无|无|无|无|√|无|
|call_or_put|str|合约类型|期权合约类型，仅期权适用，C:Call(认购或看涨)， P:Put(认沽或看跌)|无|无|无|无|√|无|
|conversion_start_date|datetime.datetime|可转债开始转股日期|可转债初始转股价的执行日期，仅可转债适用|无|无|√|无|无|无|

**示例：**

```
get_symbol_infos(sec_type1=1010, symbols='SHSE.600008,SZSE.000002')
```

**输出：**

```
[{'symbol': 'SHSE.600008', 'sec_type1': 1010, 'sec_type2': 101001, 'board': 10100101, 'exchange': 'SHSE', 'sec_id': '600008', 'sec_name': '首创环保', 'sec_abbr': 'SCHB', 'price_tick': 0.01, 'trade_n': 1, 'listed_date': datetime.datetime(2000, 4, 27, 0, 0, tzinfo=tzfile('PRC')), 'delisted_date': datetime.datetime(2038, 1, 1, 0, 0, tzinfo=tzfile('PRC')), 'underlying_symbol': '', 'option_type': '', 'option_margin_ratio1': 0.0, 'option_margin_ratio2': 0.0, 'call_or_put': '', 'conversion_start_date': None},
 {'symbol': 'SZSE.000002', 'sec_type1': 1010, 'sec_type2': 101001, 'board': 10100101, 'exchange': 'SZSE', 'sec_id': '000002', 'sec_name': '万科A', 'sec_abbr': 'WKA', 'price_tick': 0.01, 'trade_n': 1, 'listed_date': datetime.datetime(1991, 1, 29, 0, 0, tzinfo=tzfile('PRC')), 'delisted_date': datetime.datetime(2038, 1, 1, 0, 0, tzinfo=tzfile('PRC')), 'underlying_symbol': '', 'option_type': '', 'option_margin_ratio1': 0.0, 'option_margin_ratio2': 0.0, 'call_or_put': '', 'conversion_start_date': None}]
```

**注意：**

**1.** `sec_type1`为必填参数，即一次只能查询一个品种的标的基本信息。

**2.** 查询的标的信息根据参数组合`sec_type1, sec_type2, exchanges, symbols`取交集，若输入参数之间出现任何矛盾（换句话说，所有的参数限制出满足要求的交集为空)，则返回`空list/空DataFrame` ，例如`get_symbol_infos(sec_type1=1040，exchanges='SZSE')`返回的是空值。

**3.** 若输入包含无效标的代码`symbols`，则返回的`list/DataFrame`只包含有效标的代码对应的数据。

**4.** 参数组合示例：

|查询以下范围 symbol 的基本信息|sec_type1|sec_type2|exchanges|symbols|
|---|---|---|---|---|
|查询指定股票|1010|None|None|'SHSE.600008,SZSE.000002'|
|查询 A 股股票|1010|101001|None|None|
|查询深交所股票|1010|None|'SZSE'|None|
|查询 ETF|1020|102001|None|None|
|查询上交所 LOF|1020|102002|'SHSE'|None|
|查询可转债|1030|103001|None|None|
|查询深交所可转债|1030|103001|'SZSE'|None|
|查询股指期货|1040|104001|None|None|
|查询商品期货|1040|104003|None|None|
|查询郑商所和大商所期货|1040|None|'CZCE,DCE'|None|
|查询股票期权|1050|105001|None|None|
|查询上交所股票期权|1050|105001|'SHSE'|None|
|查询指数期权|1050|105002|None|None|
|查询商品期权|1050|105003|None|None|
|查询上期所商品期权|105003|None|'SHFE'|None|
|查询股票指数|1060|106001|None|None|

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-symbols-%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E4%BA%A4%E6%98%93%E6%97%A5%E5%A4%9A%E6%A0%87%E7%9A%84%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF)`get_symbols` - 查询指定交易日多标的交易信息

获取指定交易日多个标的交易信息，包括基本信息及日度数据.

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_symbols(sec_type1, sec_type2=None, exchanges=None, symbols=None, skip_suspended=True, skip_st=True, trade_date=None, df=False)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|sec_type1|int|证券品种大类|Y|无|指定一种证券大类，只能输入一个. 证券大类 sec_type1 清单 1010: 股票， 1020: 基金， 1030: 债券 ， 1040: 期货， 1050: 期权， 1060: 指数，1070：板块.|
|sec_type2|int|证券品种细类|N|None|指定一种证券细类，只能输入一个. 默认`None`表示不区分细类，即证券大类下所有细类. 证券细类见 sec_type2 清单 - 股票 101001:A 股，101002:B 股，101003:存托凭证 - 基金 102001:ETF，102002:LOF，102005:FOF - 债券 103001:可转债，103008:回购 - 期货 104001:股指期货，104003:商品期货，104006:国债期货 - 期权 105001:股票期权，105002:指数期权，105003:商品期权 - 指数 106001:股票指数，106002:基金指数，106003:债券指数，106004:期货指数 - 板块：107001:概念板块|
|exchanges|str or list|交易所代码|N|None|输入交易所代码，可输入多个. 采用 str 格式时，多个交易所代码必须用英文逗号分割，如：`'SHSE,SZSE'` 采用 list 格式时，多个交易所代码示例：`['SHSE', 'SZSE']` 默认`None`表示所有交易所. 交易所代码清单 SHSE:上海证券交易所，SZSE:深圳证券交易所 ， CFFEX:中金所，SHFE:上期所，DCE:大商所， CZCE:郑商所， INE:上海国际能源交易中心 ，GFEX:广期所|
|symbols|str or list|标的代码|N|None|输入标的代码，可输入多个. 采用 str 格式时，多个标的代码必须用英文逗号分割，如：`'SHSE.600008,SZSE.000002'` 采用 list 格式时，多个标的代码示例：`['SHSE.600008', 'SZSE.000002']` 默认`None`表示所有标的.|
|skip_suspended|bool|跳过停牌|N|True|是否跳过全天停牌，默认`True`跳过|
|skip_st|bool|跳过 ST|N|True|是否跳过包含 ST 的股票：`ST, *ST, SST, S*ST`, 默认`True`跳过|
|trade_date|str|交易日期|N|None|交易日期，%Y-%m-%d 格式，默认`None`取最新截面(包含退市标的)|
|df|bool|返回格式|N|False|是否返回 dataframe 格式，默认`False`返回字典格式，返回 `list[dict]`， 列表每项的 dict 的 key 值为 fields 字段.|

**返回值：**

|字段名|类型|中文名称|说明|股票字段|基金字段|债券字段|期货字段|期权字段|指数字段|
|---|---|---|---|---|---|---|---|---|---|
|trade_date|datetime.datetime|交易日期|最新交易日的日期|√|√|√|√|√|√|
|symbol|str|标的代码|exchange.sec_id|√|√|√|√|√|√|
|sec_type1|int|证券品种大类|1010: 股票，1020: 基金， 1030: 债券，1040: 期货， 1050: 期权，1060: 指数，1070：板块|√|√|√|√|√|√|
|sec_type2|int|证券品种细类|- 股票 101001:A 股，101002:B 股，101003:存托凭证 - 基金 102001:ETF，102002:LOF，102005:FOF - 债券 103001:可转债，103008:回购 - 期货 104001:股指期货，104003:商品期货，104006:国债期货 - 期权 105001:股票期权，105002:指数期权，105003:商品期权 - 指数 106001:股票指数，106002:基金指数，106003:债券指数，106004:期货指数 - 板块：107001:概念板块|√|√|√|√|√|√|
|board|int|板块|A 股 10100101:主板 A 股 10100102:创业板 10100103:科创版 10100104:北交所股票 ETF 10200101:股票 ETF 10200102:债券 ETF 10200103:商品 ETF 10200104:跨境 ETF 10200105:货币 ETF 可转债 10300101:普通可转债 10300102:可交换债券 10300103:可分离式债券 10300104:定向可转债|√|√|√|无|无|无|
|exchange|str|交易所代码|SHSE:上海证券交易所， SZSE:深圳证券交易所， CFFEX:中金所， SHFE:上期所， DCE:大商所， CZCE:郑商所， INE:上海国际能源交易中心 ，GFEX:广期所|√|√|√|√|√|√|
|sec_id|str|交易所标的代码|股票,基金,债券,指数的证券代码; 期货,期权的合约代码|√|√|√|√|√|√|
|sec_name|str|交易所标的名称|股票,基金,债券,指数的证券名称; 期货,期权的合约名称|√|√|√|√|√|√|
|sec_abbr|str|交易所标的简称|拼音或英文简称|√|√|√|√|√|√|
|price_tick|float|最小变动单位|交易标的价格最小变动单位|√|√|√|√|√|√|
|trade_n|int|交易制度|0 表示 T+0，1 表示 T+1，2 表示 T+2|√|√|√|√|√|√|
|listed_date|datetime.datetime|上市日期|证券/指数的上市日、衍生品合约的挂牌日|√|√|√|√|√|√|
|delisted_date|datetime.datetime|退市日期|股票/基金的退市日， 期货/期权的到期日(最后交易日)， 可转债的赎回登记日|√|√|√|√|√|√|
|underlying_symbol|str|标的资产|期货/期权的合约标的物 symbol，可转债的正股标的 symbol|无|无|√|√|√|无|
|option_type|str|行权方式|期权行权方式，仅期权适用，E:欧式，A:美式|无|无|无|无|√|无|
|option_margin_ratio1|float|期权保证金计算系数 1|计算期权单位保证金的第 1 个系数，仅期权适用|无|无|无|无|√|无|
|option_margin_ratio2|float|期权保证金计算系数 2|计算期权单位保证金的第 2 个系数，仅期权适用|无|无|无|无|√|无|
|call_or_put|str|合约类型|期权合约类型，仅期权适用，C:Call(认购或看涨)， P:Put(认沽或看跌)|无|无|无|无|√|无|
|conversion_start_date|datetime.datetime|可转债开始转股日期|可转债初始转股价的执行日期，仅可转债适用|无|无|√|无|无|无|
|is_adjusted|bool|合约调整|是否调整合约，True:是，False:否（调整后会产生新的新的合约名称、新的行权价格、新的合约乘数）|无|无|无|无|√|无|
|is_suspended|bool|是否停牌|是否停牌，True:是，False:否|√|√|√|无|无|无|
|is_st|bool|是否 ST|是否 ST，True: 是 ST 类（含`ST, *ST, SST, S*ST`）, False: 否|√|无|无|无|无|无|
|position|int|持仓量|当日累计持仓量(当日盘后更新)|无|无|无|√|√|无|
|settle_price|float|结算价|当日结算价(当日盘后更新)|无|无|无|√|√|无|
|pre_settle|float|昨结价|昨日结算价|无|无|无|√|√|无|
|pre_close|float|昨收价|昨日收盘价|√|√|√|√|√|√|
|upper_limit|float|涨停价|当日涨停价（首次公开发行上市的股票上市前 5 日无涨跌停价，返回0）|√|√|√|√|√|无|
|lower_limit|float|跌停价|当日跌停价（首次公开发行上市的股票上市前 5 日无涨跌停价，返回0）|√|√|√|√|√|无|
|turn_rate|float|换手率|当日换手率(%)(当日盘后更新)|√|√|无|无|无|√|
|adj_factor|float|复权因子|当日累计后复权因子|√|√|无|无|无|无|
|margin_ratio|float|保证金比例|期货最新保证金比例（交易所标准的最新期货保证金）|无|无|无|√|无|无|
|conversion_price|float|转股价|可转债最新转股价（转股价变动后的最新转股价）|无|无|√|无|无|无|
|exercise_price|float|行权价|期权最新行权价（期权合约调整后的最新行权价）|无|无|无|无|√|无|
|multiplier|int|合约乘数|期货和期权合约最新合约乘数（期权合约调整后的最新合约乘数）|无|无|无|√|√|无|

**示例：**

```
get_symbols(sec_type1=1010, symbols='SHSE.600008,SZSE.000002', trade_date='2022-01-13')
```

**输出：**

```
[{'trade_date': datetime.datetime(2022, 1, 13, 0, 0, tzinfo=tzfile('PRC')), 'pre_close': 3.47, 'upper_limit': 3.82, 'lower_limit': 3.12, 'turn_rate': 1.1215, 'adj_factor': 6.5564, 'margin_ratio': 1.0, 'multiplier': 1, 'is_adjusted': False, 'is_suspended': False, 'position': 0, 'settle_price': 0.0, 'pre_settle': 0.0, 'conversion_price': 0.0, 'exercise_price': 0.0, 'is_st': False, 'symbol': 'SHSE.600008', 'sec_type1': 1010, 'sec_type2': 101001, 'board': 10100101, 'exchange': 'SHSE', 'sec_id': '600008', 'sec_name': '首创环保', 'sec_abbr': 'SCHB', 'price_tick': 0.01, 'trade_n': 1, 'listed_date': datetime.datetime(2000, 4, 27, 0, 0, tzinfo=tzfile('PRC')), 'delisted_date': datetime.datetime(2038, 1, 1, 0, 0, tzinfo=tzfile('PRC')), 'underlying_symbol': '', 'option_type': '', 'option_margin_ratio1': 0.0, 'option_margin_ratio2': 0.0, 'call_or_put': '', 'conversion_start_date': None},
 {'trade_date': datetime.datetime(2022, 1, 13, 0, 0, tzinfo=tzfile('PRC')), 'pre_close': 22.05, 'upper_limit': 24.26, 'lower_limit': 19.85, 'turn_rate': 0.9394, 'adj_factor': 173.0897, 'margin_ratio': 1.0, 'multiplier': 1, 'is_adjusted': False, 'is_suspended': False, 'position': 0, 'settle_price': 0.0, 'pre_settle': 0.0, 'conversion_price': 0.0, 'exercise_price': 0.0, 'is_st': False, 'symbol': 'SZSE.000002', 'sec_type1': 1010, 'sec_type2': 101001, 'board': 10100101, 'exchange': 'SZSE', 'sec_id': '000002', 'sec_name': '万科A', 'sec_abbr': 'WKA', 'price_tick': 0.01, 'trade_n': 1, 'listed_date': datetime.datetime(1991, 1, 29, 0, 0, tzinfo=tzfile('PRC')), 'delisted_date': datetime.datetime(2038, 1, 1, 0, 0, tzinfo=tzfile('PRC')), 'underlying_symbol': '', 'option_type': '', 'option_margin_ratio1': 0.0, 'option_margin_ratio2': 0.0, 'call_or_put': '', 'conversion_start_date': None}]
```

**注意：**

**1.** `sec_type1`为必填参数，即一次只能查询一个品种的标的最新交易日信息。

**2.** 查询的标的信息根据参数组合`sec_type1, sec_type2, exchanges, symbols`取交集，若输入参数之间出现任何矛盾（换句话说，所有的参数限制出满足要求的交集为空)，则返回`空list/空DataFrame` ，例如`get_symbols(sec_type1=1040, exchanges='SZSE')`返回的是空值。

**3.** 若输入包含无效标的代码`symbols`，则返回的`list/DataFrame`只包含有效标的代码对应的数据。

**4.** 获取全 A 股票代码示例`get_symbols(sec_type1=1010, sec_type2=101001, df=True)['symbol'].tolist()`

**5.** 可转债的到期日(退市日期)为`delisted_date`，转股价值为`转股价值 = 转股数*股价 = (100/可转债转股价) * 股价`

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-history-symbol-%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E6%A0%87%E7%9A%84%E5%A4%9A%E6%97%A5%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF)`get_history_symbol` - 查询指定标的多日交易信息

获取指定标的多个历史交易日的交易信息，包括基本信息及日度数据.

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_history_symbol(symbol=None, start_date=None, end_date=None, df=False)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|symbol|str|标的代码|Y|无|输入标的代码，只能输入一个.|
|start_date|str|开始时间|N|None|开始时间日期，%Y-%m-%d 格式，默认`None`表示当前时间|
|end_date|str|结束时间|N|None|结束时间日期，%Y-%m-%d 格式，默认`None`表示当前时间|
|df|bool|返回格式|N|False|是否返回 dataframe 格式，默认`False`返回字典格式，返回 `list[dict]`， 列表每项的 dict 的 key 值为 fields 字段.|

**返回值：**

|字段名|类型|中文名称|说明|股票字段|基金字段|债券字段|期货字段|期权字段|指数字段|
|---|---|---|---|---|---|---|---|---|---|
|trade_date|datetime.datetime|交易日期|最新交易日的日期|√|√|√|√|√|√|
|symbol|str|标的代码|exchange.sec_id|√|√|√|√|√|√|
|sec_type1|int|证券品种大类|1010: 股票，1020: 基金， 1030: 债券，1040: 期货， 1050: 期权，1060: 指数，1070：板块|√|√|√|√|√|√|
|sec_type2|int|证券品种细类|- 股票 101001:A 股，101002:B 股，101003:存托凭证 - 基金 102001:ETF，102002:LOF，102005:FOF - 债券 103001:可转债，103008:回购 - 期货 104001:股指期货，104003:商品期货，104006:国债期货 - 期权 105001:股票期权，105002:指数期权，105003:商品期权 - 指数 106001:股票指数，106002:基金指数，106003:债券指数，106004:期货指数 - 板块：107001:概念板块|√|√|√|√|√|√|
|board|int|板块|A 股 10100101:主板 A 股 10100102:创业板 10100103:科创版 10100104:北交所股票 ETF 10200101:股票 ETF 10200102:债券 ETF 10200103:商品 ETF 10200104:跨境 ETF 10200105:货币 ETF 可转债 10300101:普通可转债 10300102:可交换债券 10300103:可分离式债券 10300104:定向可转债|√|√|√|无|无|无|
|exchange|str|交易所代码|SHSE:上海证券交易所， SZSE:深圳证券交易所， CFFEX:中金所， SHFE:上期所， DCE:大商所， CZCE:郑商所， INE:上海国际能源交易中心 ，GFEX:广期所|√|√|√|√|√|√|
|sec_id|str|交易所标的代码|股票,基金,债券,指数的证券代码; 期货,期权的合约代码|√|√|√|√|√|√|
|sec_name|str|交易所标的名称|股票,基金,债券,指数的证券名称; 期货,期权的合约名称|√|√|√|√|√|√|
|sec_abbr|str|交易所标的简称|拼音或英文简称|√|√|√|√|√|√|
|price_tick|float|最小变动单位|交易标的价格最小变动单位|√|√|√|√|√|√|
|trade_n|int|交易制度|0 表示 T+0，1 表示 T+1，2 表示 T+2|√|√|√|√|√|√|
|listed_date|datetime.datetime|上市日期|证券/指数的上市日、衍生品合约的挂牌日|√|√|√|√|√|√|
|delisted_date|datetime.datetime|退市日期|股票/基金的退市日， 期货/期权的到期日(最后交易日)， 可转债的赎回登记日|√|√|√|√|√|√|
|underlying_symbol|str|标的资产|期货/期权的合约标的物 symbol，可转债的正股标的 symbol|无|无|√|√|√|无|
|option_type|str|行权方式|期权行权方式，仅期权适用，E:欧式，A:美式|无|无|无|无|√|无|
|option_margin_ratio1|float|期权保证金计算系数 1|计算期权单位保证金的第 1 个系数，仅期权适用|无|无|无|无|√|无|
|option_margin_ratio2|float|期权保证金计算系数 2|计算期权单位保证金的第 2 个系数，仅期权适用|无|无|无|无|√|无|
|call_or_put|str|合约类型|期权合约类型，仅期权适用，C:Call(认购或看涨)， P:Put(认沽或看跌)|无|无|无|无|√|无|
|conversion_start_date|datetime.datetime|可转债开始转股日期|可转债初始转股价的执行日期，仅可转债适用|无|无|√|无|无|无|
|is_adjusted|bool|合约调整|是否调整合约，True:是，False:否（调整后会产生新的新的合约名称、新的行权价格、新的合约乘数）|无|无|无|无|√|无|
|is_suspended|bool|是否停牌|是否停牌，True:是，False:否|√|√|√|无|无|无|
|is_st|bool|是否 ST|是否 ST，True: 是 ST 类（含`ST, *ST, SST, S*ST`）, False: 否|√|无|无|无|无|无|
|position|int|持仓量|当日累计持仓量(当日盘后更新)|无|无|无|√|√|无|
|settle_price|float|结算价|当日结算价(当日盘后更新)|无|无|无|√|√|无|
|pre_settle|float|昨结价|昨日结算价|无|无|无|√|√|无|
|pre_close|float|昨收价|昨日收盘价|√|√|√|√|√|√|
|upper_limit|float|涨停价|当日涨停价（首次公开发行上市的股票上市前 5 日无涨跌停价，返回0）|√|√|√|√|√|无|
|lower_limit|float|跌停价|当日跌停价（首次公开发行上市的股票上市前 5 日无涨跌停价，返回0）|√|√|√|√|√|无|
|turn_rate|float|换手率|当日换手率(%)(当日盘后更新)|√|√|无|无|无|√|
|adj_factor|float|复权因子|当日累计后复权因子|√|√|无|无|无|无|
|margin_ratio|float|保证金比例|期货在指定交易日的交易所保证金比例|无|无|无|√|无|无|
|conversion_price|float|转股价|可转债在指定交易日的转股价|无|无|√|无|无|无|
|exercise_price|float|行权价|期权在指定交易日的行权价|无|无|无|无|√|无|
|multiplier|int|合约乘数|期货/期权合约在指定交易日的合约乘数|无|无|无|√|√|无|

**示例：**

```
get_history_symbol(symbol='SZSE.000002', start_date='2022-09-01', end_date='2022-09-30', df=True)
```

**输出：**

```
                  trade_date  pre_close  ...  conversion_start_date
0  2022-09-01 00:00:00+08:00      16.63  ...                   None
1  2022-09-02 00:00:00+08:00      16.84  ...                   None
2  2022-09-05 00:00:00+08:00      16.80  ...                   None
3  2022-09-06 00:00:00+08:00      17.17  ...                   None
4  2022-09-07 00:00:00+08:00      17.85  ...                   None
5  2022-09-08 00:00:00+08:00      17.52  ...                   None
6  2022-09-09 00:00:00+08:00      17.58  ...                   None
7  2022-09-13 00:00:00+08:00      18.15  ...                   None
8  2022-09-14 00:00:00+08:00      18.18  ...                   None
9  2022-09-15 00:00:00+08:00      17.91  ...                   None
10 2022-09-16 00:00:00+08:00      18.50  ...                   None
11 2022-09-19 00:00:00+08:00      18.00  ...                   None
12 2022-09-20 00:00:00+08:00      18.18  ...                   None
13 2022-09-21 00:00:00+08:00      17.56  ...                   None
14 2022-09-22 00:00:00+08:00      17.56  ...                   None
15 2022-09-23 00:00:00+08:00      17.49  ...                   None
16 2022-09-26 00:00:00+08:00      17.51  ...                   None
17 2022-09-27 00:00:00+08:00      17.44  ...                   None
18 2022-09-28 00:00:00+08:00      17.60  ...                   None
19 2022-09-29 00:00:00+08:00      17.46  ...                   None
20 2022-09-30 00:00:00+08:00      17.15  ...                   None

[21 rows x 34 columns]
```

**注意：**

**1.** 若输入包含无效标的代码`symbol`，则返回的`list/DataFrame`只包含有效标的代码对应的数据。

**2.** 停牌时且股票发生除权除息，涨停价和跌停价可能有误差。

**3.** 对每个标的，数据根据`trade_date`的升序进行排序。

**4.** `start_date`和`end_date`中月份和日期都可以只输入个位数，例:`'2010-7-8'或'2017-7-30'`

**5.** 当`start_date`大于或者等于 `end_date` 时, 取指定时间段的数据,当 `start_date` > `end_date`时, 返回报错

**6.** 可转债的到期日(退市日期)`delisted_date`，转股价值为`转股价值 = 转股数*股价 = (100/可转债转股价) * 股价`

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-trading-dates-by-year-%E6%9F%A5%E8%AF%A2%E5%B9%B4%E5%BA%A6%E4%BA%A4%E6%98%93%E6%97%A5%E5%8E%86)`get_trading_dates_by_year` - 查询年度交易日历

查询一个交易所的指定年份的交易日历.

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_trading_dates_by_year(exchange, start_year, end_year)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|exchange|str|交易所代码|Y|无|只能填写一个交易所代码 交易所代码清单: SHSE:上海证券交易所，SZSE:深圳证券交易所，CFFEX:中金所，SHFE:上期所，DCE:大商所，CZCE:郑商所，INE:上海国际能源交易中心，GFEX:广期所|
|start_year|int|开始年份|Y|无|查询交易日历开始年份（含），yyyy 格式|
|end_year|int|结束年份|Y|无|查询交易日历结束年份（含），yyyy 格式|

**返回值:dataframe**

|**字段名**|**类型**|**中文名称**|**说明**|
|---|---|---|---|
|date|str|自然日期|查询年份的自然日日期|
|trade_date|str|交易日期|查询年份的交易日日期，如果所在自然日不是交易日，交易日期为空字符串`''`|
|next_trade_date|str|下一交易日|交易日对应的下一交易日|
|pre_trade_date|str|上一交易日|交易日对应的上一交易日|

**示例：**

```
# coding=utf-8
from __future__ import print_function, absolute_import
from gm.api import *


def init(context):

    # 实时模式
    if context.mode == 1:
        context.trade_date = get_trading_dates_by_year(exchange='SHSE', start_year=int(context.now.strftime('%Y')),
                                                       end_year=int(context.now.strftime('%Y')))
        context.trade_date.index = context.trade_date['date']
    # 回测模式
    else:
        context.trade_date = get_trading_dates_by_year(exchange='SHSE', start_year=int(context.backtest_start_time[:4]),
                                                       end_year=int(context.backtest_start_time[:4]))
        context.trade_date.index = context.trade_date['date']
    today = context.now.strftime('%Y-%m-%d')
    next_trade_date = context.trade_date.loc[today, 'next_trade_date']
    pre_trade_date = context.trade_date.loc[today, 'pre_trade_date']
    print('今天：{}, 上个交易日：{}， 下个交易日：{}'.format(today, pre_trade_date, next_trade_date))

    # 判断当天是否为交易日
    trade_date = context.trade_date['trade_date'].tolist()
    if context.now.strftime('%Y-%m-%d') not in  trade_date:
        print(context.now,"当前为非交易日")
    else:
        print(context.now, "当前为交易日")
```

**输出：**

```
今天：2023-08-21, 上个交易日：2023-08-18， 下个交易日：2023-08-22
```

**示例：**

```
get_trading_dates_by_year(exchange='SHSE', start_year=2020, end_year=2023)
```

**输出：**

```
            date next_trade_date pre_trade_date  trade_date
0     2020-01-01      2020-01-02     2019-12-31
1     2020-01-02      2020-01-03     2019-12-31  2020-01-02
2     2020-01-03      2020-01-06     2020-01-02  2020-01-03
3     2020-01-04      2020-01-06     2020-01-03
4     2020-01-05      2020-01-06     2020-01-03
         ...             ...            ...         ...
1456  2023-12-27      2023-12-28     2023-12-26  2023-12-27
1457  2023-12-28      2023-12-29     2023-12-27  2023-12-28
1458  2023-12-29      2024-01-02     2023-12-28  2023-12-29
1459  2023-12-30      2024-01-02     2023-12-29
1460  2023-12-31      2024-01-02     2023-12-29

[1461 rows x 4 columns]
```

**注意：**

**1.** `exchange`参数仅支持输入单个交易所代码，若代码错误，会报错

**2.** 开始年份必须不晚于结束年份，否则返回`空dataframe`

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-previous-n-trading-dates-%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E6%97%A5%E6%9C%9F%E7%9A%84%E5%89%8Dn%E4%B8%AA%E4%BA%A4%E6%98%93%E6%97%A5)`get_previous_n_trading_dates` - 查询指定日期的前n个交易日

查询一个交易所指定日期的前n个交易日

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准, gm SDK 3.0.163 版本新增**

**函数原型：**

```
get_previous_n_trading_dates(exchange, date, n=1)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|exchange|str|交易所代码|Y|无|只能填写一个交易所代码，交易所代码清单： SHSE:上海证券交易所，SZSE:深圳证券交易所，CFFEX:中金所，SHFE:上期所，DCE:大商所，CZCE:郑商所，INE:能源中心，GFEX:广期所|
|date|str|指定日期|Y|无|指定的基准日期T，%Y-%m-%d 格式|
|n|int|交易日个数|N|无|前n个交易日，默认为1，即前一天，取值范围[1，支持的最早交易日至当前交易日个数-1]|

**返回值：**

交易日期字符串(%Y-%m-%d 格式)列表

```
get_previous_n_trading_dates(exchange='SHSE', date='2023-10-10', n=10)
```

**输出：**

```
['2023-09-18', '2023-09-19', '2023-09-20', '2023-09-21', '2023-09-22', '2023-09-25', '2023-09-26', '2023-09-27', '2023-09-28', '2023-10-09']
```

**注意：**

**1.** exchange参数仅支持输入单个交易所代码。

**2.** n必须为非零正整数，n=0时会报错，n超出最早支持的交易日时只会返回至最早交易日。

**3.** 获取date前N个交易日，不包括date日期。

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-next-n-trading-dates-%E6%9F%A5%E8%AF%A2%E6%8C%87%E5%AE%9A%E6%97%A5%E6%9C%9F%E7%9A%84%E5%90%8En%E4%B8%AA%E4%BA%A4%E6%98%93%E6%97%A5)`get_next_n_trading_dates` - 查询指定日期的后n个交易日

查询一个交易所指定日期的后n个交易日

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准, gm SDK 3.0.163 版本新增**

**函数原型：**

```
get_next_n_trading_dates(exchange, date, n=1)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|exchange|str|交易所代码|Y|无|只能填写一个交易所代码，交易所代码清单： SHSE:上海证券交易所，SZSE:深圳证券交易所，CFFEX:中金所，SHFE:上期所，DCE:大商所，CZCE:郑商所，INE:能源中心，GFEX:广期所|
|date|str|指定日期|Y|无|指定的基准日期T，%Y-%m-%d 格式|
|n|int|交易日个数|N|无|前n个交易日，默认为1，即前一天，取值范围[1，支持的最早交易日至当前交易日个数-1]|

**返回值：**

交易日期字符串(%Y-%m-%d 格式)列表

```
get_next_n_trading_dates(exchange='SHSE', date='2023-09-27', n=10)
```

**输出：**

```
['2023-09-28', '2023-10-09', '2023-10-10', '2023-10-11', '2023-10-12', '2023-10-13', '2023-10-16', '2023-10-17', '2023-10-18', '2023-10-19']

```

**注意：**

**1.** exchange参数仅支持输入单个交易所代码。

**2.** n必须为非零正整数，n=0时会报错，n超出最早支持的交易日时只会返回至最早交易日。

**3.** 获取date前N个交易日，不包括date日期。

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-trading-session-%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E6%97%B6%E6%AE%B5)`get_trading_session` - 查询交易时段

查询一个标的所属品种交易时间段.

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_trading_session(symbols, df=False)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|symbols|str or list|标的代码|Y|无|输入标的代码，可输入多个. 采用 str 格式时，多个标的代码必须用英文逗号分割，如：`'SHSE.600008,SZSE.000002'` 采用 list 格式时，多个标的代码示例：`['SHSE.600008', 'SZSE.000002']`.|
|df|bool|返回格式|N|False|是否返回 dataframe 格式， 默认`False`返回字典格式，返回`list[dict]`，列表每项的 dict 的 key 值见返回字段名|

**返回值：**

|字段名|类型|中文名称|说明|
|---|---|---|---|
|symbol|str|标的代码|exchange.sec_id|
|exchange|str|交易所代码|SHSE:上海证券交易所，SZSE:深圳证券交易所，CFFEX:中金所， SHFE:上期所，DCE:大商所，CZCE:郑商所，INE:上海国际能源交易中心，GFEX:广期所|
|time_trading|list[dict]|连续竞价时段|HH:MM 格式，按时间顺序排列，如品种存在夜盘，夜盘时段排最前。 如`[{'start': '09:30'，'end': '11:30'}， {'start': '13:00'， 'end': '14:57'}]`，|
|time_callaution|list[dict]|集合竞价时段|HH:MM 格式，按时间顺序排列，如品种存在夜盘，夜盘时段排最前。 如`[{’start': '09:15'， 'end': '09:25'}，{'start': '14:57'， 'end': '15:00'}]`，|

**示例：**

```
get_trading_session(symbols='SHFE.au2306', df=False)
```

**输出：**

```
[{'symbol': 'SHFE.AU2306', 'exchange': 'SHFE', 'time_trading': [{'start': '21:00', 'end': '2:30'}, {'start': '9:00', 'end': '10:15'}, {'start': '10:30', 'end': '11:30'}, {'start': '13:30', 'end': '15:00'}], 'time_auction': [{'start': '20:55', 'end': '20:59'}]}]
```

**注意：**

**1.** 如果输入不存在的合约代码 symbol，会报错提示"该合约[symbol]不存在"。

## [#](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E9%80%9A%E7%94%A8%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#get-contract-expire-rest-days-%E6%9F%A5%E8%AF%A2%E5%90%88%E7%BA%A6%E5%88%B0%E6%9C%9F%E5%89%A9%E4%BD%99%E5%A4%A9%E6%95%B0)`get_contract_expire_rest_days` - 查询合约到期剩余天数

查询期货合约、期权合约、可转债的到期剩余天数。

**此函数为掘金公版(体验版/专业版/机构版)函数，券商版以升级提示为准**

**函数原型：**

```
get_contract_expire_rest_days(symbols, start_date=None, end_date=None, trade_flag = False, df=False)
```

**参数：**

|参数名|类型|中文名称|必填|默认值|参数用法说明|
|---|---|---|---|---|---|
|symbols|str or list|标的代码|Y|无|输入标的代码，可输入多个. 采用 str 格式时，多个标的代码必须用英文逗号分割，如：`'CFFEX.IF2212,CFFEX.IC2212'` 采用 list 格式时，多个标的代码示例：`['CFFEX.IF2212', CFFEX.IC2212']`.|
|start_date|str or datetime|开始日期|N|None|%Y-%m-%d 格式，不早于合约上市日 默认`None`表示最新时间.|
|end_date|str or datetime|结束日期|N|None|%Y-%m-%d 格式，不早于指定的开始日期，否则返回报错 默认`None`表示最新时间.|
|trade_flag|bool|交易日|N|False|是否需要按交易日计算，默认`False`按自然日计算，则返回到期剩余自然日天数; 设置为`True`按交易日计算，则返回到期剩余交易日天数|
|df|bool|返回格式|N|False|是否返回 dataframe 格式， 默认`False`返回字典格式，返回`list[dict]`，列表每项的 dict 的 key 值见返回字段名|

**返回值：**

|字段名|类型|中文名称|说明|
|---|---|---|---|
|date|str|日期|[开始日期,结束日期]内的自然日期|
|symbol|str|合约代码|exchange.sec_id|
|days_to_expire|int|到期剩余天数|合约在指定交易时间至合约到期日的剩余天数. trade_flag=False，计算方法按自然日 trade_flag=True，计算方法按交易日|

**示例：**

```
get_contract_expire_rest_days(symbols='CFFEX.IM2212', start_date='2022-12-12', end_date='2022-12-16', trade_flag = True, df=True)
```

**输出：**

```
         date        symbol  days_to_expire
0  2022-12-12  CFFEX.IM2212               4
1  2022-12-13  CFFEX.IM2212               3
2  2022-12-14  CFFEX.IM2212               2
3  2022-12-15  CFFEX.IM2212               1
4  2022-12-16  CFFEX.IM2212               0
```

**注意：**

**1.** 参数`start_date`和`end_date`必须是 pd.to_dateime()可识别的字符串 str 格式，例'yyyy-mm-dd'， 'yyyy-mm-dd %H:%M:%S'，或者是 datetime 对象

**2.** 在到期日当天，到期剩余天数为 0。正数表示距离到期日的剩余天数，0 表示到期日当天，负数表示距离到期日已经过去的天数。

**3.** 如果输入不存在的合约代码`symbol`，会报错提示"该合约[symbol]不存在"。

**4.** 如果输入的合约代码`symbol`在时间段内的某个日期未上市，在该日期的到期剩余天数返回 NaN。

**5.** 用于剩余天数计算的到期日是最后交易日。


# 行情数据

### [#](https://www.myquant.cn/docs2/docs/#%E5%AE%9E%E6%97%B6%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)实时行情数据

掘金量化目前支持获取国内两个市场的股票实时行情数据。

包含 Tick 行情和 Bar 行情。

|交易所名称|市场代码|
|---|---|
|上交所|SHSE|
|深交所|SZSE|

#### [#](https://www.myquant.cn/docs2/docs/#tick-tick-%E8%A1%8C%E6%83%85)Tick - Tick 行情

快照行情, 包含以下内容：

|参数名|类型|说明|
|---|---|---|
|symbol|str|[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86)|
|open|float|开盘价|
|high|float|最高价|
|low|float|最低价|
|price|float|最新价|
|cum_volume|int|成交总量/最新成交量,累计值|
|cum_amount|float|成交总金额/最新成交额,累计值|
|trade_type|int|交易类型 1: ‘双开’, 2: ‘双平’, 3: ‘多开’, 4: ‘空开’, 5: ‘空平’, 6: ‘多平’, 7: ‘多换’, 8: ‘空换’|
|last_volume|int|瞬时成交量|
|cum_position|int|合约持仓量(期),累计值（股票此值为 0）|
|last_amount|float|瞬时成交额 (郑商所 last_amount 为 0)|
|created_at|datetime.datetime|创建时间|
|quotes|list[quote]|股票提供买卖 1-5 档,list[0]~list[4]分别对应买卖一档到五档；跌停时无买方报价，涨停时无卖方报价|
|iopv|float|基金份额参考净值，(只适用于基金)|

#### [#](https://www.myquant.cn/docs2/docs/#quote-%E6%8A%A5%E4%BB%B7-dict)Quote - 报价(dict)

|参数名|类型|说明|
|---|---|---|
|bid_p|float|买价|
|bid_v|int|买量|
|ask_p|float|卖价|
|ask_v|int|卖量|

#### [#](https://www.myquant.cn/docs2/docs/#bar-bar-%E8%A1%8C%E6%83%85)Bar - Bar 行情

支持以下多种频率的股票实时行情数据：

|交易所名称|市场代码|数据频率|
|---|---|---|
|上交所|SHSE|60s, 300s, 900s, 1800s, 3600s|
|深交所|SZSE|60s, 300s, 900s, 1800s, 3600s|

> 注：s 表示“秒”。

行情包含以下数据:

|参数名|类型|说明|
|---|---|---|
|symbol|str|[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86)|
|frequency|str|频率|
|open|float|开盘价|
|close|float|收盘价|
|high|float|最高价|
|low|float|最低价|
|amount|float|成交额|
|volume|int|成交量|
|bob|datetime.datetime|bar 开始时间|
|eob|datetime.datetime|bar 结束时间|

### [#](https://www.myquant.cn/docs2/docs/#%E5%8E%86%E5%8F%B2%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE)历史行情数据

掘金量化目前支持获取国内两个市场的股票历史行情数据。

包含 Tick 行情和 Bar 行情，支持前复权和后复权以及不复权。

|交易所名称|市场代码|
|---|---|
|上交所|SHSE|
|深交所|SZSE|

#### [#](https://www.myquant.cn/docs2/docs/#tick-tick-%E8%A1%8C%E6%83%85-2)Tick - Tick 行情

时间范围：最早支持2022.8.10，[点击 (opens new window)](https://www.myquant.cn/terminal)了解更多体验版/专业版/券商版/机构版的Tick时间范围权限。

快照行情，包含以下内容：

|参数名|类型|说明|
|---|---|---|
|symbol|str|[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86)|
|open|float|开盘价|
|high|float|最高价|
|low|float|最低价|
|price|float|最新价|
|cum_volume|int|成交总量/最新成交量,累计值|
|cum_amount|float|成交总金额/最新成交额,累计值|
|trade_type|int|交易类型 1：‘双开’, 2：‘双平’, 3：‘多开’, 4：‘空开’, 5：‘空平’, 6：‘多平’, 7：‘多换’, 8：‘空换’|
|last_volume|int|瞬时成交量|
|cum_position|int|合约持仓量(期),累计值(股票该值为 0)|
|last_amount|float|瞬时成交额（郑商所 last_amount 为 0）|
|created_at|datetime.datetime|创建时间|
|quotes|list[quote]|股票提供买卖 1-5 档,list[0]~list[4]分别对应买卖一档到五档；跌停时无买方报价，涨停时无卖方报价|
|iopv|float|基金份额参考净值，(只适用于基金)|

#### [#](https://www.myquant.cn/docs2/docs/#quote-%E6%8A%A5%E4%BB%B7-dict-2)Quote - 报价(dict)

|参数名|类型|说明|
|---|---|---|
|bid_p|float|买价|
|bid_v|int|买量|
|ask_p|float|卖价|
|ask_v|int|卖量|

#### [#](https://www.myquant.cn/docs2/docs/#bar-bar-%E8%A1%8C%E6%83%85-2)Bar - Bar 行情

支持以下多种频率的股票历史行情数据：

|交易所名称|市场代码|频率以及数据范围|
|---|---|---|
|上交所|SHSE|60s，300s, 900s, 1800s和3600s具体范围可查看终端的数据管理下载权限范围, 1d（日线）上市以来|
|深交所|SZSE|60s，300s, 900s, 1800s和3600s具体范围可查看终端的数据管理下载权限范围, 1d（日线）上市以来|

> 注：s 表示“秒”, d 表示“天”。

行情包含以下数据:

|参数名|类型|说明|
|---|---|---|
|symbol|str|[标的代码](https://www.myquant.cn/docs2/sdk/python/%E5%8F%98%E9%87%8F%E7%BA%A6%E5%AE%9A.html#symbol-%E4%BB%A3%E7%A0%81%E6%A0%87%E8%AF%86)|
|frequency|str|频率|
|open|float|开盘价|
|close|float|收盘价|
|high|float|最高价|
|low|float|最低价|
|amount|float|成交额|
|volume|int|成交量|
|bob|datetime.datetime|bar 开始时间|
|eob|datetime.datetime|bar 结束时间|

---

## [#](https://www.myquant.cn/docs2/docs/#%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE)财务数据

### [#](https://www.myquant.cn/docs2/docs/#%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3)数据接口

掘金量化支持查询国内两个市场的股票财务数据。

|交易所名称|市场代码|
|---|---|
|上交所|SHSE|
|深交所|SZSE|

#### [#](https://www.myquant.cn/docs2/docs/#python-%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3-2)Python 数据接口

- [stk_get_fundamentals_balance - 查询资产负债表数据](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-balance-%E6%9F%A5%E8%AF%A2%E8%B5%84%E4%BA%A7%E8%B4%9F%E5%80%BA%E8%A1%A8%E6%95%B0%E6%8D%AE)，查询**指定时间段某一股票**所属上市公司的资产负债表数据。
    
- [stk_get_fundamentals_cashflow - 查询现金流量表数据](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-cashflow-%E6%9F%A5%E8%AF%A2%E7%8E%B0%E9%87%91%E6%B5%81%E9%87%8F%E8%A1%A8%E6%95%B0%E6%8D%AE)，查询**指定时间段某一股票**所属上市公司的现金流量表数据。
    
- [stk_get_fundamentals_income - 查询利润表数据](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-income-%E6%9F%A5%E8%AF%A2%E5%88%A9%E6%B6%A6%E8%A1%A8%E6%95%B0%E6%8D%AE)，查询**指定时间段某一股票**所属上市公司的利润表数据
    
- [stk_get_fundamentals_balance_pt - 查询资产负债表截面数据（多标的）](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-balance-pt-%E6%9F%A5%E8%AF%A2%E8%B5%84%E4%BA%A7%E8%B4%9F%E5%80%BA%E8%A1%A8%E6%88%AA%E9%9D%A2%E6%95%B0%E6%8D%AE-%E5%A4%9A%E6%A0%87%E7%9A%84)，查询**指定日期截面**的股票所属上市公司的资产负债表数据（point-in-time）
    
- [stk_get_fundamentals_cashflow_pt - 查询现金流量表截面数据（多标的）](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-cashflow-pt-%E6%9F%A5%E8%AF%A2%E7%8E%B0%E9%87%91%E6%B5%81%E9%87%8F%E8%A1%A8%E6%88%AA%E9%9D%A2%E6%95%B0%E6%8D%AE-%E5%A4%9A%E6%A0%87%E7%9A%84)，查询**指定日期截面**的股票所属上市公司的资产负债表数据（point-in-time）
    
- [stk_get_fundamentals_income_pt - 查询利润表截面数据（多标的）](https://www.myquant.cn/docs2/sdk/python/API%E4%BB%8B%E7%BB%8D/%E8%82%A1%E7%A5%A8%E8%B4%A2%E5%8A%A1%E6%95%B0%E6%8D%AE%E5%8F%8A%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E5%87%BD%E6%95%B0%EF%BC%88%E5%85%8D%E8%B4%B9%EF%BC%89.html#stk-get-fundamentals-income-pt-%E6%9F%A5%E8%AF%A2%E5%88%A9%E6%B6%A6%E8%A1%A8%E6%88%AA%E9%9D%A2%E6%95%B0%E6%8D%AE-%E5%A4%9A%E6%A0%87%E7%9A%84)，查询**指定日期截面**的股票所属上市公司的利润表数据（point-in-time）
    

**示例 1**

取股票代码“SHSE.600000”在指定时间段：2016-01-01 -- 2017-01-01，`主要财务指标`中的 eps_basic,eps_dil字段的值：

```
stk_get_finance_prime(symbol='SHSE.600000', fields='eps_basic,eps_dil',rpt_type=None, data_type=None,start_date=None, end_date=None, df=True)
```

返回结果：

```
        symbol    pub_date    rpt_date  rpt_type  data_type  eps_basic  eps_dil
0  SHSE.600000  2017-04-27  2016-03-31         1        102       0.63     0.63
1  SHSE.600000  2017-08-30  2016-06-30         6        102       0.95     0.95
2  SHSE.600000  2017-10-28  2016-09-30         9        102       1.44     1.44
3  SHSE.600000  2019-03-26  2016-12-31        12        102       1.85     1.85
```

#### [#](https://www.myquant.cn/docs2/docs/#%E5%85%B6%E4%BB%96%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3-2)其他语言数据接口